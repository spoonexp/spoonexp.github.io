{"version":3,"sources":["webpack:///./src/views/Lend.vue","webpack:///./src/views/Lend.vue?760d"],"names":["class","formatBN","tvl","pools","item","key","lpName","pool","name","components","Tooltip","LendCareTr","data","hidden","filter","p","isLend","watch","account","this","loadData","mounted","$store","state","methods","getTokenPrice","path","inDecimals","outDecimals","pancakeSwap","Contract","PancakeSwap","getAmountsOut","utils","parseUnits","tokenPrice","length","toString","dividedBy","pow","console","log","i","lendContract","ibToken","id","totalSupply","div","multipliedBy","plus","decimals","want","render"],"mappings":"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","file":"js/chunk-2d0bd207.dfa8c0d7.js","sourcesContent":["<template>\n  <div class=\"container mx-auto mt-4 p-4\">\n    <div class=\"flex justify-center items-end flex-wrap md:justify-between\">\n      <div class=\"text-2xl\">Available Lending Pools</div>\n      <div\n        class=\" flex flex-col items-center justify-center border border-solid border-gray-200 rounded-3xl p-4 px-8 bg-white shadow\"\n      >\n        <div class=\"flex items-center \">\n          <div\n            class=\"relative flex items-center text-xl font-bold leading-10 mr-1 \"\n          >\n            Total Value Locked\n            <Tooltip v-if=\"false\" class=\"ml-1\"></Tooltip>\n          </div>\n        </div>\n\n        <div class=\"text-3xl text-green-400 leading-10\">\n          ${{ formatBN(tvl, { decimals: 0, dp: 2 }) }}\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"flex border border-solid rounded-3xl shadow bg-white p-6 px-0 mt-6\"\n    >\n      <div class=\"table-fixed w-full\">\n        <div>\n          <ul class=\"flex text-center\">\n            <li class=\"w-5/12 hidden md:block \"></li>\n            <li class=\"w-5/12 md:w-3/12\">Total Supply</li>\n            <li class=\"w-5/12 md:w-3/12\">Your Balance</li>\n            <li class=\"w-2/12\"></li>\n          </ul>\n        </div>\n        <div>\n          <LendCareTr\n            v-for=\"item in pools\"\n            :key=\"item.lpName\"\n            :pool=\"item\"\n          ></LendCareTr>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Tooltip from \"@/components/Tooltip\";\nimport LendCareTr from \"@/components/LendCareTr\";\nimport {\n  stakePools,\n  pancakeSwapRouter,\n  akitaAddress,\n  usdAddress,\n  wftmAddress,\n  usdDecimals,\n} from \"@/config\";\nimport { getContract, getProvider } from \"@/utils/initWeb3\";\nimport PancakeSwapABI from \"@/assets/abi/PancakeSwap.json\";\nimport ibTokenABI from \"@/assets/abi/ibToken.json\";\nimport { ethers } from \"ethers\";\nimport BigNumber from \"bignumber.js\";\nexport default {\n  name: \"Lend\",\n  components: {\n    Tooltip,\n    LendCareTr,\n  },\n  data() {\n    return {\n      hidden: false,\n      tvl: new BigNumber(0),\n      pools: stakePools.filter((p) => p.isLend),\n    };\n  },\n  watch: {\n    \"$store.state.account\": function(account) {\n      if (account) {\n        this.loadData();\n      }\n    },\n  },\n  mounted() {\n    if (this.$store.state.account) {\n      this.loadData();\n    }\n  },\n  methods: {\n    async getTokenPrice(path, inDecimals, outDecimals) {\n      try {\n        const pancakeSwap = new ethers.Contract(\n          pancakeSwapRouter,\n          PancakeSwapABI,\n          getProvider()\n        );\n        let tokenPrice = await pancakeSwap.getAmountsOut(\n          ethers.utils.parseUnits(\"1\", inDecimals),\n          path\n        );\n        tokenPrice = new BigNumber(\n          tokenPrice[tokenPrice.length - 1].toString()\n        ).dividedBy(new BigNumber(10).pow(outDecimals));\n        return tokenPrice;\n      } catch (error) {\n        console.log(\"getTokenPrice\", path, error);\n        return \"0\";\n      }\n    },\n    async loadData() {\n      this.tvl = new BigNumber(\"0\");\n      for (let i = 0; i < this.pools.length; i++) {\n        const p = this.pools[i];\n        const pool = getContract(p.lendContract, ibTokenABI);\n        switch (p.id) {\n          case 1:\n            this.tvl = this.tvl.plus(\n              new BigNumber((await pool.totalSupply()).toString())\n                .div(new BigNumber(10).pow(18))\n                .multipliedBy(\n                  await this.getTokenPrice(\n                    [akitaAddress, wftmAddress, usdAddress],\n                    18,\n                    usdDecimals\n                  )\n                )\n            );\n            break;\n          case 2:\n            this.tvl = this.tvl.plus(\n              new BigNumber((await pool.totalSupply()).toString())\n                .div(new BigNumber(10).pow(p.decimals))\n                .multipliedBy(\n                  await this.getTokenPrice(\n                    [await pool.want(), usdAddress],\n                    18,\n                    usdDecimals\n                  )\n                )\n            );\n            break;\n          case 3:\n            this.tvl = this.tvl.plus(\n              new BigNumber((await pool.totalSupply()).toString()).div(\n                new BigNumber(10).pow(p.decimals)\n              )\n            );\n            break;\n          case 4:\n            this.tvl = this.tvl.plus(\n              new BigNumber((await pool.totalSupply()).toString()).div(\n                new BigNumber(10).pow(p.decimals)\n              )\n            );\n            break;\n          case 5:\n            this.tvl = this.tvl.plus(\n              new BigNumber((await pool.totalSupply()).toString()).div(\n                new BigNumber(10).pow(p.decimals)\n              )\n            );\n            break;\n        }\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./Lend.vue?vue&type=template&id=7186f1e8\"\nimport script from \"./Lend.vue?vue&type=script&lang=js\"\nexport * from \"./Lend.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}